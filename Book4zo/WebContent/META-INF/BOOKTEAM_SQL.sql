
-- 비계층형 도서 게시판
CREATE TABLE BOOK(
BOOK_SEQ NUMBER,
ISBN VARCHAR2(100 CHAR),
TITLE VARCHAR2(100 CHAR),
AUTHOR VARCHAR2(100 CHAR),
TRANSLATOR VARCHAR2(100 CHAR),
COVER_URL VARCHAR2(200 CHAR),
PUBLISHER VARCHAR2(100 CHAR),
CATEGORY_ID NUMBER, --FK
PRICE_STANDARD NUMBER,
PUB_DATE DATE,
DESCRIPTION LONG,
PRIMARY KEY(BOOK_SEQ)
);

ALTER TABLE BOOK
ADD CONSTRAINT BOOK_FK1 
FOREIGN KEY(CATEGORY_ID)
REFERENCES CATEGORY(CATEGORY_ID);

--카테고리 테이블
CREATE TABLE CATEGORY(
CATEGORY_ID NUMBER,
CATEGORY_TAG VARCHAR2(100 CHAR),
PRIMARY KEY(CATEGORY_ID)
);


-- 계층형 댓글 게시판 (DEPTH 1까지만 구현)
CREATE TABLE REPLY(
REPLY_SEQ NUMBER,
USER_ID VARCHAR2(20 CHAR),--FK
BOOK_SEQ NUMBER,--FK
REPLY_STAR_RATE NUMBER,
REPLY_CONTENT VARCHAR2(150 CHAR),
REPLY_DATE DATE,
REPLY_LIKE NUMBER,
REFER NUMBER,
DEPTH NUMBER,
STEP NUMBER,
PRIMARY KEY(REPLY_SEQ)
);

ALTER TABLE REPLY
ADD CONSTRAINT REPLY_FK1 
FOREIGN KEY(USER_ID)
REFERENCES USERS(USER_ID);

ALTER TABLE REPLY
ADD CONSTRAINT REPLY_FK2 
FOREIGN KEY(BOOK_SEQ)
REFERENCES BOOK(BOOK_SEQ);

-- 비계층형 포스트 게시판
CREATE TABLE POST(
POST_SEQ NUMBER,
USER_ID VARCHAR2(20 CHAR),--FK
BOOK_SEQ NUMBER,--FK
POST_TITLE VARCHAR2(100 CHAR),
POST_CONTENTS LONG,
POST_DATE DATE,
POST_VIEWS NUMBER,
POST_UPLOAD_FILE VARCHAR2(100 CHAR),
PRIMARY KEY(POST_SEQ)
);

ALTER TABLE POST
ADD CONSTRAINT POST_FK1 
FOREIGN KEY(USER_ID)
REFERENCES USERS(USER_ID);

ALTER TABLE POST
ADD CONSTRAINT POST_FK2 
FOREIGN KEY(BOOK_SEQ)
REFERENCES BOOK(BOOK_SEQ);


-- 회원 테이블
CREATE TABLE USERS(
USER_ID VARCHAR2(20 CHAR),
USER_PWD VARCHAR2(20 CHAR),
USER_EMAIL VARCHAR2(50 CHAR),
USER_NAME VARCHAR2(10 CHAR),
USER_IMAGE VARCHAR2(100 CHAR),
PRIMARY KEY(USER_ID)
);


-- 찜 테이블
CREATE TABLE DIBS(
USER_ID VARCHAR2(20 CHAR),--FK
BOOK_SEQ NUMBER,--FK
DIBS_DATE DATE
);

ALTER TABLE DIBS
ADD CONSTRAINT DIBS_FK1 
FOREIGN KEY(USER_ID)
REFERENCES USERS(USER_ID);

ALTER TABLE DIBS
ADD CONSTRAINT DIBS_FK2 
FOREIGN KEY(BOOK_SEQ)
REFERENCES BOOK(BOOK_SEQ);

ALTER TABLE DIBS
ADD CONSTRAINT DIBS_PK
PRIMARY KEY(USER_ID, BOOK_SEQ);

-- 비계층형 공지사항 게시판
CREATE TABLE NOTICE(
NOTICE_SEQ NUMBER,
ADMIN_ID VARCHAR2(20 CHAR),--FK
NOTICE_TITLE VARCHAR2(100 CHAR),
NOTICE_CONTENTS LONG,
NOTICE_DATE DATE,
-- 일단 파일 업로드 없는채로 만들었어요 파일 업로드 기능 넣고싶으시면 컬럼 추가하면 돼요 !
-- NOTICE_UPLOAD_FILE VARCHAR2(100 CHAR),
PRIMARY KEY(NOTICE_SEQ)
);

ALTER TABLE NOTICE
ADD CONSTRAINT NOTICE_FK1 
FOREIGN KEY(ADMIN_ID)
REFERENCES ADMIN(ADMIN_ID);




--관리자 테이블
CREATE TABLE ADMIN(
ADMIN_ID VARCHAR2(20 CHAR),
ADMIN_PWD VARCHAR2(20 CHAR),
PRIMARY KEY(ADMIN_ID)
);


--시퀀스 생성
CREATE SEQUENCE BOOK_SEQ
INCREMENT BY 1
START WITH 1
MINVALUE 1;

CREATE SEQUENCE REPLY_SEQ
INCREMENT BY 1
START WITH 1
MINVALUE 1;

CREATE SEQUENCE POST_SEQ
INCREMENT BY 1
START WITH 1
MINVALUE 1;

CREATE SEQUENCE NOTICE_SEQ
INCREMENT BY 1
START WITH 1
MINVALUE 1;


----------------------------------------------------------------
























































































